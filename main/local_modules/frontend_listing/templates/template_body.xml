<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!--Requirements:-->
        <!--* url-->
        <template id="frontend_listing.switch" name="Listing: switch">
            <form t-att-action="keep(url, search=0)" method="get" t-att-class="search_class">
                <div class="input-group">
                    <a t-att-class=" 'active' if map_url else 'disabled' " t-att-href="map_url">Map</a>
                    <a t-att-class=" 'active' if list_url else 'disabled' " t-att-href="list_url">List</a>
                    <!--<input type="text" name="search" class="search-query form-control" placeholder="Search..." t-att-value="search"/>-->
                    <!--<span class="input-group-btn">-->
                        <!--<a class="btn btn-default a-submit"><i class="fa fa-search"/></a>-->
                    <!--</span>-->
                </div>

            </form>
        </template>

        <!--Requirements:-->
        <!--* url-->
        <template id="frontend_listing.search" name="Listing: search">
            <form t-att-action="keep(url, search=0, company_status=company_status)" method="get" t-att-class="search_class">
                <div class="input-group">
                    <input type="text"
                           name="search"
                           class="search-query form-control"
                           placeholder="Search..."
                           t-att-value="search"/>
                    <input type="hidden" name='company_status' t-att-value='company_status'/>
                    <span class="input-group-btn">
                        <a class="btn btn-default a-submit"><i class="fa fa-search"/></a>
                    </span>
                </div>

            </form>
         </template>
		
        <!--Template about the directory footer of the website-->
        <template id="frontend_listing.footer" name="Listing: footer">
			<footer class="footer">
				<div class="container">
				   <div class="row fontCGSM">
						<div class="col-xs-6 col-sm-4 col-lg-4">
							<span class="name">CG Studio Map</span><br />
							<span class="catch">where cg is</span>
						</div>
						<div class="socials col-xs-5 col-sm-4 col-lg-4 col-xs-offset-1 col-sm-offset-4 col-lg-offset-4">
							<p class="pull-right hidden-xs">
								<a href="#"><i class="fa fa-twitter fa-3x"></i></a>
								<a href="#"><i class="fa fa-linkedin fa-3x"></i></a>
								<a href="#"><i class="fa fa-github fa-3x"></i></a>
							</p>
							<p class="pull-right visible-xs">
								<a href="#"><i class="fa fa-twitter fa-lg"></i></a>
								<a href="#"><i class="fa fa-linkedin fa-lg"></i></a>
								<a href="#"><i class="fa fa-github fa-lg"></i></a>
							</p>
						</div>

				   </div>


				</div>
			</footer>
        </template>

        <template id="frontend_listing.filters" name="Listing: Filters">
            <div>
                <form t-att-action="keep(url, search=search, company_status='open')" method="get" >
                    <div class="input-group">
                        <input type="hidden" name='company_status' value="open"/>
                        <input type="hidden" name='search' t-att-value="search"/>
                        <input type='submit' class="btn btn-default a-submit" value="open"/>
                    </div>
                </form>

                <form t-att-action="keep(url, search=search, company_status=company_status)" method="get" >
                    <div class="input-group">
                        <input type="hidden" name='company_status' value="closed"/>
                        <input type="hidden" name='search' t-att-value="search"/>
                        <input type='submit' class="btn btn-default a-submit" value="closed"/>
                    </div>
                </form>

                <form t-att-action="keep(url, search=search, company_status=company_status)" method="get" >
                    <div class="input-group">
                        <input type="hidden" name='company_status' value="active"/>
                        <input type="hidden" name='search' t-att-value="search"/>
                        <input type='submit' class="btn btn-default a-submit" value="all together"/>
                    </div>
                </form>


            </div>
        </template>

	
        <template id="frontend_listing.base" name="Base for listing of companies">
            <t t-call="frontend_base.doctype_html"/>
            <t t-call="frontend_base.html">

                <t t-call="frontend_base.full_head"/>

                <t t-call="frontend_base.body">
                    <div class="products_pager">
                        <div class="row" style="width: 100%;">
                            <t t-call="frontend_listing.search">
                                <t t-set="search_class">pagination form-inline col-md-3</t>
                            </t>
                        </div>
                    </div>
                    <t t-call="frontend_listing.switch"/>
                    <div class="stats stat-right fontCGSM">
                        <t t-set="nbr" t-value="nbr_companies"/>
                        <t t-call="frontend_base.company_counter" />
                    </div>
                    <t t-call="frontend_listing.filters"/>

                    <t t-raw="0"/>
                    <t t-call="frontend_listing.footer"/>
                    <t t-call="frontend_base.engine">
                        <t t-call="frontend_base.company_counter_js"/>
                    </t>
                </t> <!-- closing body -->

            </t> <!-- closing html -->
        </template>


        <template id="frontend_listing.map" name="Listing: Map">
            <t t-call="frontend_listing.base">
                <div id="map"></div>
            </t>
            <script type="text/javascript" src="/frontend_listing/static/src/lib/markerclusterer.js"></script>
            <script type="text/javascript" src="/frontend_listing/static/src/js/google_map.js"></script>
            <script>
                google.maps.event.addDomListener(
                window,
                'load',
                function () { initialize(<t t-raw="geoloc"/>); }
                );
            </script>
        </template>

        <template id="frontend_listing.list" name="Listing: List">
            <t t-call="frontend_listing.base">
				<div class="jumbotron fontCGSM">
					<div id="toolbar">
					</div>
                    <div id="loading-image">
                        <img src="/frontend_base/static/ajax-loader.gif"
                             alt="Loading... please wait"/>
                    </div>
                    <table id="table"
                           data-toolbar="#toolbar"
                           data-mobile-responsive="true"
                           data-check-on-init="true">
                    </table>
				</div>
            </t>

            <script type="text/javascript">
                bootstrap_table_ajax('<t t-esc="search"/>', '<t t-raw="company_status"/>')
            </script>



        </template>
    </data>
</openerp>
