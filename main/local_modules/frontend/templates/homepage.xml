<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="homepage_ammap_config" model="ammap.config">
            <field name="name">homepage</field>
            <field name="color">#97E9F7</field>
            <field name="color_solid">#00C0ED</field>
            <field name="unlisted_areas_color">#E2E2E4</field>
            <field name="roll_over_outline_color">#FFFF00</field>

            <field name="description">Config of the map on the homepage.</field>
        </record>

        <template id="homepage" name="Homepage" page="True" priority="29">
            <t t-call="website.layout">
                <link rel="stylesheet" href="/ammap/static/src/js/ammap_3.14.0/ammap.css" type="text/css"/>
                <script src="/ammap/static/src/js/ammap_3.14.0/ammap.js" type="text/javascript"></script>
                <!-- map file should be included after ammap.js -->
                <script src="/ammap/static/src/js/ammap_3.14.0/maps/js/worldLow.js" type="text/javascript"></script>
                <script type="text/javascript">
                var map;

                AmCharts.ready(function() {
                    map = new AmCharts.AmMap();
                    map.pathToImages = "/ammap/static/src/js/ammap_3.14.0/images/";

                    map.colorSteps = 10;
                    var dataProvider = {
                        mapVar: AmCharts.maps.worldLow,
                    };
                    var areas = new Array()
                    <t t-foreach="geochart_data" t-as="country">
                    areas[areas.length] = {
                        id: "<t t-esc="country.code"/>",
                        name: "<t t-esc="country.name"/>",
                        value: <t t-esc="geochart_data[country]"/>
                        };
                    </t>
                    dataProvider['areas'] = areas;
                    map.dataProvider = dataProvider;
                    // make the map static. Can't be dragged.
                    map.dragMap = false;


                    map.areasSettings = {
                        autoZoom: true,
                        // low value color
                        color: "<t t-esc='ammap_config.color'/>",
                        // high value color
                        colorSolid: "<t t-esc='ammap_config.color_solid'/>",
                        // Color for country without value.
                        unlistedAreasColor: "<t t-esc='ammap_config.unlisted_areas_color'/>",
                        // Color of borders when rolling over a country.
                        rollOverOutlineColor: "<t t-esc='ammap_config.roll_over_outline_color'/>",

                        autoZoom: false,
                        balloonText: "[[title]] ([[value]])"

                    };
                    map.zoomControl = {
                        // disable the zoom
                        zoomControlEnabled: false,
                        // disable the pan controls.
                        panControlEnabled: false

	                };
                    // disable zoom on double click as we removed the zoom controls.
                    map.zoomOnDoubleClick = false;


                    var valueLegend = new AmCharts.ValueLegend();
                    valueLegend.right = 10;
                    valueLegend.minValue = "little";
                    valueLegend.maxValue = "a lot!";
                    map.valueLegend = valueLegend;


                    map.write("<t t-esc="geochart_target"/>");
                });
                </script>

                <div id="wrap" class="oe_structure oe_empty">
                    <div t-att-id="geochart_target"></div>
                </div>
            </t>
        </template>
    </data>
</openerp>
