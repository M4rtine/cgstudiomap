<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="frontend_base.submenu" name="Submenu">
            <li t-if="not submenu.child_id" t-att-class="
        'active' if submenu.url and submenu.url != '/' and request.httprequest.path == submenu.url.replace('/page/website.', '/page/') else None
        ">
                <a t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url"
                   t-ignore="true"
                   t-att-target="'_blank' if submenu.new_window else None"
                   t-field="submenu.name"
                >
                </a>
            </li>
            <li t-if="submenu.child_id" t-attf-class="dropdown #{
        (submenu.url and submenu.url != '/' and any([request.httprequest.path == child.url.replace('/page/website.', '/page/') for child in submenu.child_id if child.url]) or
         (submenu.url and request.httprequest.path == submenu.url.replace('/page/website.', '/page/'))) and 'active'
        }">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" t-field="submenu.name">
                    <span class="caret" t-ignore="true"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <t t-foreach="submenu.child_id" t-as="submenu">
                        <t t-call="website.submenu"/>
                    </t>
                </ul>
            </li>
        </template>

        <template id="frontend_base.navbar" name="Base: body navbar">
            <nav class="navbar navbar-inverse navbar-fixed-top fontCGSM" role="navigation">
                    <div class="navbar-header">
						
						<span class="navbar-text navbar-left"><a href="/" class="navbar-link"><span id="logo-nav"></span></a></span>
						
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-top-collapse">
							<span id="toggle"></span>
                        </button>
						
                    </div>
				
					<div class="navbar-collapse collapse">
						
						<div class="dropdown">
							<p class="navbar-text navbar-right hidden-xs">
								<a href="#" class="navbar-link dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span id="user-login"></span></a>
							</p>

							<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
								<li groups="base.group_public">
									<a t-attf-href="/web/login">
										<b>Sign in</b>
									</a>
								</li>
                                <li t-ignore="true" t-if="website.user_id != user_id"><a href="/web" role="menuitem">My Account</a></li>
                                <li t-ignore="true" t-if="website.user_id != user_id" class="divider"/>
                                <li t-ignore="true" t-if="website.user_id != user_id" ><a t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a></li>
							</ul>
						</div>						
						
						<p class="navbar-text navbar-right hidden-xs"><a href="#" class="navbar-link"><span id="user-login"></span></a></p>
						
						<ul class="nav navbar-nav navbar-center">
							
                            <t t-foreach="website.menu_id.child_id" t-as="submenu">
                                <t t-if="(submenu.user_logged and request.uid !=  3) or (submenu.user_not_logged and request.uid == 3)">
                                    <t t-call="frontend_base.submenu"/>
                                </t>
                            </t>
							<li role="separator" class="divider visible-xs-inline"></li>
							<li class="visible-xs-inline"><a href="#">Sign in</a></li>
						</ul>
					</div>
			</nav>

        </template>

        <template id="frontend_base.body" name="Base: body">
            <body>
                <t t-call="frontend_base.navbar"/>
                <t t-raw="0"/>
                <div id="wrapwrap"></div>

                <div class="scroll-up hidden-xs">
                    <a href="#home"><i class="fa fa-angle-up"></i></a>
                </div>

            </body>
        </template>

        <!--Template about the footer of the website-->
        <template id="frontend_base.footer" name="Base: Footer">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-8" >
                            <p>
                                cg Studio Map <span class="label label-danger">Beta</span><br />
                                powered by <a href="http://www.odoo.com/page/website-builder" target="_blank">odoo.com</a><br />
                                maintained by volunteers hoping to make a difference.
                            </p>
                        </div>
                        <div class="col-sm-4">
                            <p>Connect with us:</p>
                            <p>
                                <a t-attf-href="/page/website.contactus"><i class="fa fa-envelope fa-3x"/></a><!--news link-->
                                <a t-att-href="website.social_twitter"><i class="fa fa-twitter fa-3x"/></a><!--news link-->
                                <a t-att-href="website.social_linkedin"><i class="fa fa-linkedin fa-3x"/></a><!--news link-->
                                <a t-att-href="website.social_github"><i class="fa fa-github fa-3x"/></a><!--news link-->
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <!--template for the counter.-->
        <!--Requirements:-->
        <!--    * nbr-->
        <!--    * type-->
        <!---->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="nbr" t-value="{value_for_nbr}"/>-->
        <!--<t t-set="type" t-value="{value_for_type}"/>-->
        <!--<t t-call="frontend_base.counter"/>-->
        <!---->
        <!--To pass a constant value like a string: <t t-set="type">My Type</t>-->
        <!--This way, odoo won't consider the given value as a variable.-->
        <template id="frontend_base.counter" name="Counter">
            <div class="stats stat-left fontCGSM">
                <div id="stats-bg-svg"></div>
                <span id="stats-txt">
                    <p><t t-esc="nbr"/></p>
                    <p><t t-esc="type"/></p>
                </span>
            </div>


        </template>


        <!--Template for the counter of companies-->
        <!--Requirements:-->
        <!--* nbr-->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="nbr" t-value="{value_for_nbr}"/>-->
        <!--<t t-call="frontend_base.company_counter"/>-->
        <template id="frontend_base.company_counter" name="Company Counter">
            <t t-set="type">Companies</t>
            <t t-call="frontend_base.counter"/>
        </template>

        <!--Template for the counter of users-->
        <!--Requirements:-->
            <!--* nbr-->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="nbr" t-value="{value_for_nbr}"/>-->
        <!--<t t-call="frontend_base.user_counter"/>-->
        <template id="frontend_base.user_counter" name="User Counter">
            <t t-set="type">Happy Users</t>
            <t t-call="frontend_base.counter"/>
        </template>

        <!--Represent an industry tag for companies.-->
        <!--Requirements:-->
        <!--* ind: industry object-->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="ind" t-value="{value_for_ind}"/>-->
        <!--<t t-call="frontend_base.industry_tag"/>-->
        <template id="frontend_base.industry_tag" name="Industry Tag">
            <!--Uncomment this part when the directory is released!-->
            <!--<a itemprop="name" t-att-href="'/directory?search=%s' % ind.name">-->
            <em>
                <span class="label label-info" t-esc="ind.name"/>
            </em>
            <!--</a>-->
        </template>

        <!--Represent the link to the company's form -->
        <!--Requirements:-->
        <!--* ind: partner object-->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="partner" t-value="{value_for_partner}"/>-->
        <!--<t t-call="frontend_base.company_form_link">-->
        <!--    something that will be the link.-->
        <!--</t>-->
        <template id="frontend_base.company_form_link" name="Commpany Form Link">
            <!--Uncomment this part when the directory is released!-->
            <!--<a itemprop="name" t-att-href="keep('/directory/company/%s' % slug(partner), page=(pager['page']['num'] if pager['page']['num']>1 else None))">-->
            <a t-attf-href="/web#return_label=Website&amp;view_type=form&amp;model=#{partner._name}&amp;id=#{partner.id}&amp;action=#{action}">
                <t t-raw="0"/>
            </a>
        </template>

        <!--Represent the logo to a company-->
        <!--Requirements:-->
        <!--* ind: partner object-->
        <!--How To:-->
        <!--=======-->
        <!--<t t-set="partner" t-value="{value_for_partner}"/>-->
        <!--<t t-call="frontend_base.company_logo"/>-->
        <template id="frontend_base.company_logo" name="Company Logo">
            <img itemprop="image"
                 class="img img-responsive"
                 t-att-src="website.image_url(partner, 'image_small')"
            />
        </template>

    </data>
</openerp>
